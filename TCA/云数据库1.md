### 数据库配置

### 数据库连接访问

### 数据库迁移


### MYSQL配置
1. 配置操作流程

2. 初始化腾讯云数据库
> 相关参数：支持的字符集、表明大小写敏感、自定义端口、root账户密码、确认密码

3. 云端访问MYSQL云数据库
- 内网访问（同一内网中的CVM等）

- 外网访问（数据库不建议暴露在外网中）
> 实例详情  -->  开启外网地址

4. MYSQL云数据库管理
- 查看修改字符集
- 实例监控
- 参数设置
- 账号管理
- 数据库操作
- 备份管理
- 数据库操作日志下载
- 回档升级

5. 导入和离线迁移数据
> 新建DTS数据迁移服务

6. 云数据库实例与生命周期管理
- 主实例
> 可读可写，可单独存在

- 只读实例
> 无法单独存在，必须隶属于某个主实例

- 常规实例
> 不含只读实例
- 灾备实例

- 实例复制类型

1. 异步复制
> Master在执行完更新操作后立即向应用程序返回响应，
> 然后Master再向Slave复制数据。数据更新过程中，Master不需要等待Slave的响应

2. 半同步复制
> Master在执行完更新操作后立即向Slave复制数据，Slave接收到数据并写入到relay log中
> （无需执行） 后才向Master返回成功信息。
3. 强同步复制
> Master 在执行完更新操作后立即向Slave复制数据，Slave接收到数据并执行完成后才向Master返回成功信息

### MariaDB
1. MariaDB数据库配置操作流程
> TDSQL(MariaDB) 

2. 初始化MariaDB数据

3. 访问MariaDB数据
> 数据导出时，数据库不能执行更新操作
4. 使用mysqldump导入数据

5. 实现云数据库读写分离
- 只读账号
  1. 只读请求分配策略
  2. 只读备机延迟参数

- 读写账号


### Redis（弹性缓存CRS：数据存储在内存上）

- 创建实例
> 控制台 --> 弹性缓存Redis --> 实例列表

- 实例初始化


- 数据迁移
> CVM自建实例迁移目前不支持跨地域迁移


### MongoDB（分片式）

- 数据库连接用户与认证机制
  1. 用户：rwuser  认证机制：MONGODB-CR 认证时RUI必须加上authMechanism=MONGODB-CR

  2. 用户：mongouser 认证机制：SCRAM-SHA-1(推荐)  


- 数据导入和导出
  1. 备份： mongodump


  2. 备份：mongoexport

  3. 导入：mongoimport

- 分片与集群
> 客户端 --> Mongos路由 --> 分片写入集群（因此某一台服务器不一定存储了所有数据）

- 备份与回档
> 五天内的数据可以任意还原（前提是有指定的备份）

### DCDB（分布式）

### HTAP数据库(TiDB)  配置

- 节点（测试/开发环境）
  1. TiDB  数量：1
  2. PD    数量：3
  3. TiKV  数量：3 

- 节点（生产环境）
  1. TiDB  数量：2或以上
  2. PD    数量： 3
  3. TiKV  数量：3或以上

- 执行计划
  1. 使用 EXPLAIN（用于分析SQL执行过程）来优化SQL

- 系统变量
> set @@var = ?

### 数据传输服务(DTS)
> 新建DTS --> 修改配置 --> 选择数据库 --> 校验信息 --> 启动迁移 --> 增量同步 --> 停止迁移

- 数据订阅