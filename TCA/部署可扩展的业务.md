## 弹性伸缩(Auto Scaling)
> 弹性伸缩根据您的业务需求和伸缩策略，为您自动调整计算资源。您可设置定时、周期或监控策略，恰到好处地增加或减少CVM 实例，并完成实例配置，保证业务平稳健康运行。在需求高峰期时，弹性伸缩自动增加 CVM 实例的数量，以保证性能不受影响；当需求较低时，则会减少 CVM 实例数量以降低成本。弹性伸缩既适合需求稳定的应用程序，同时也适合每天、每周、每月使用量不停波动的应用程序。

### 功能
- 告警伸缩：
> 如果您希望根据 CVM 指标情况调整业务部署，那么您可以自定义告警触发策略，当业务负载使得指标到达阈值时，该策略将帮助您自动增加或减少 CVM 实例数量，从而灵活应对业务负载变化，提高设备利用率，节省部署和实例成本。
> 指标种类：CPU利用率、内存利用率、内网出带宽、内网入带宽、外网出带宽、外网入带宽
> 监控周期：1分钟
> 伸缩动作：增加/减少固定数量子机或调整至固定值
- 定时伸缩：
> 如果您的负载变化情况是可以预知的，那么您可以设置定时任务，对您的设备扩展活动进行规划，您可以使用此功能定时及周期性地自动增加或减少 CVM 实例，从而灵活应对业务负载变化，提高设备利用率，节省部署和实例成本。
> 定时操作：设置最大伸缩数、最小伸缩数或期望实例数
> 周期设置：支持按天/周/月重复操作
- 替换不健康子机：
> 弹性伸缩自动检测实例的健康状况，一旦发现异常，即自动复制出健康的实例，以替换状态异常的 CVM 实例，确保您的应用程序获得预期的计算容量，为您的业务保驾护航。
> 执行操作：若检测主机 ping 不可达时间超过一分钟，则生成健康副本替换当前子机，保证业务健康运行
- 自动配置负载平衡：
> 通过告警策略新增的 CVM 实例还可直接关联已有负载均衡 CLB，以使伸缩组新增的实例承担分发流量，从而提高服务可用性。
> 执行操作：新增子机自动注册到负载均衡（CLB）中
> 权重设置：新增子机负载均衡权重默认设置为10
> 负载均衡策略：沿用负载均衡中已定义的策略
- 伸缩活动记录：
> 弹性伸缩会根据您设定的伸缩策略自动增加或减少 CVM 实例，如果您想了解伸缩策略已执行情况，使用该功能查看即可，该功能可帮助您掌握弹性伸缩已执行的活动情况。
> 记录内容：活动起因、活动结果、起止时间
> 查询操作：支持按时间查询历史记录
> 实时显示：当前进行中的伸缩活动变化
> 详情展示：详细失败原因及建议操作

### 应用场景
1. 提前部署扩缩容
> 用户明确何时需要扩缩容，则可提前设置Auto Scaling定时策略。到相应时间时，系统将自动添加或减少CVM实例，无需人工等待。
2. 低成本应对业务浪涌
> 当客户面临访问峰值，需要提前准备服务器，预防CPU增长造成的服务器压力过大；待压力过去后再根据实际负载缩减服务器。客户可提前设置Auto Scaling监控策略，系统将根据设定好的业务监控指标自动判定是否需要CVM平行扩展。如果监控指标达到阈值，则实时自动增加或减少CVM实例，并自动完成负载均衡配置。既节约了成本，也无需客户时刻为手动扩容作准备。
3. 自动替换不健康CVM
> 为避免不健康的云服务器继续运行对业务造成影响，用户需要时刻关注系统中CVM的运行情况，并随时准备处理。使用Auto Scaling，系统将定时对CVM进行健康检查，若扫描出运行异常的CVM实例，则自动平行扩展一台实例替换异常实例。该操作记录将被保留供用户查看。


### 管理
#### 步骤1：创建启动配置
> 启动配置定义了用于弹性伸缩的 CVM 实例的配置信息，包括 CVM 的镜像、存储、网络、安全组、登录方式和其他配置信息。
1. 选择区域
> 区域的选择限制了可以手动添加的云主机和可以绑定的负载均衡。比如说，如果启动配置的区域选择了广州，那么伸缩组里自动添加的就是广州的云主机。在区域为广州的伸缩组里，将不能手动添加上海、北京、香港、多伦多等其他区域的云主机，也不能绑定上海、北京、香港、多伦多等其他区域的负载均衡。
2. 选择机型
3. 命名配置名称。
4. 选择和伸缩组想要绑定的云主机同样的机型。
5. 选择镜像
> 创建启动配置可使用公共镜像或自定义镜像。
> 此处强烈建议使用已经部署好环境的自定义镜像。
6.  选择存储和网络
> 在此页面设置磁盘和网络这里要特别注意如果系统盘选择了云硬盘，那么数据盘就可以选择数据盘快照。
> 对于有大量数据的用户来说，他们经常会使用数据盘来存储数据。当数据盘A创建了快照文件，用户可使用该快照文件，快速克隆多块磁盘，达到快速部署服务器的目的。
> 在弹性伸缩自动添加新的云服务器实例时，如果启动配置数据盘指定了数据盘快照，腾讯云云硬盘可以支持启动云服务器实例后自动挂载包含设定数据的数据盘，满足数据自动拷贝的需求。
7. 设置信息
> 设置信息：在页面选择登录方式、安全组。通过弹性伸缩服务新增的CVM实例默认免费享受云安全和云监控服务。

#### 步骤2：创建伸缩组
> 伸缩组是遵循相同规则、面向同一场景的云服务器实例的集合。
1. 登录弹性伸缩控制台，点击导航条中的【伸缩组】。
2. 新建伸缩组
3. 添加云主机(可选)
> 现在我们来绑定云主机。
> 在云主机列表添加进我们要绑定的云主机实例。完成配置后，此条目将显示在页面的启动配置列表中，示例如下：
#### 步骤3：创建伸缩策略
> 弹性伸缩组根据伸缩策略进行云服务器数量的增减：
- 创建定时任务，用于定时执行伸缩活动，您还可设置是否周期性执行；
> 创建定时任务
> 如果您的负载变化情况是可以预知的，那么您可以设置定时任务，对您的设备扩展活动进行规划，您可以使用此功能定时及周期性地自动增加或减少 CVM 实例，从而灵活应对业务负载变化，提高设备利用率，节省部署和实例成本。
- 创建告警触发策略，根据云监控指标（如CPU、内存使用率等）情况执行伸缩活动。
> 创建告警触发策略
> 如果您希望根据 CVM 指标情况调整业务部署，那么您可以自定义告警触发策略，当业务负载使得指标到达阈值时，该策略将帮助您自动增加或减少 CVM 实例数量，从而灵活应对业务负载变化，提高设备利用率，节省部署和实例成本。

> 伸缩组建立时均会默认建立一条 ping 不可达告警触发策略，以替换不健康子机。在使用告警触发策略之前，需要在 CVM 的镜像里安装新版本的云监控 Agent。安装方法见：安装监控组件
> 在新建页面设置告警策略，基于云监控性能指标（如CPU、内存、带宽等），自动为伸缩组增加或减少指定台数或指定百分比的CVM实例。
