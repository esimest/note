# Deployment，提供控制副本数量以及 pod 版本功能
# Deployment 通过 RS 控制 pod 的副本数量

# Deployment 有两种方式来对 Pod 进行版本变更
## Recreate: 直接杀掉所有现在版本的 Pod, 然后启动新版本的 Pod
## RollingUpdate: 滚动更新，可达到服务不中断的情况下进行升级

apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  name: nginx
  lables:
    app: webserver
  annotations:
    deployment.kubernetes.io/revison: "1"
  spec:
    replicas: 3
    selector:
      matchLabels:
        app: webserver
    strategy:
      rollingUpdate:
        maxSurge: 1  # 副本数量临时增加
        maxUnavaliable: 1
      type: RollingUpdate
    template:
      metadata:
        labels:
          app: webserver
      spec:
        containers:
        - name: nginx
          image: nginx:1.7.9
          ports:
          - containerPort: 80