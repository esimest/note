# 数据交换

## 网络终端间数据通信的实现

1. 机制一 ：建立连接在网络上的任何两个终端之间的数据传输通路的机制

2. 机制二 ：控制数据沿着源终端至目的终端传输通路完成传输过程的机制

> 交换的本质就是以上两种机制的结合

## 电路交换

> 由电路交换机按需在两个终端之间动态建立信道的过程称为电路交换过程。
> 也称为连接建立过程，两个终端之间的信道建立方式成为电路交换方式。

### 过程

1. 传输数据之前需要建立连接
2. 建立连接之后，交换机所使用的两个端口由该通信链路独享，无法与其它终端进行连接，因此数据传输完成后需要断开连接
3. 通道建立后就是点对点传输信道，所以不需要建立第二种机制

### 缺点

1. 独占两个终端之间的信道，导致信道经过的物理链路利用率很低
2. 不能保证多对端口之间同时进行通信
3. 信道经过的所有物理链路的传输速率必须一致

## 分组交换

### 虚电路交换

> 电路交换中一旦建立两个终端之间的通信，该对终端将独占该信道经过的物理链路带宽
> 解决此类问题的一种方案是使用物理链路共享

#### 共享物理链路需要解决的问题

1. 交换机接收数据后，不知道往哪个端口发送数据
2. 平滑流量问题 ：一段时间内各终端之间传输的数据流量必须小于物理链路相同时段内传输的流量

#### 上述问题的 解决方案

- 标识符和分组
  > 给每一对终端之间传输的数据分配唯一的标识符，并将标识符与传输路径绑定在一起，建立一个转发表
  > 数据+标识符所构成的新的数据格式称为分组
  > 标识符又称分组控制信息

- 转发表

- 存储转发
  >接收到多个不同终端的信号
  >将分组放入输入输出队列中（按先到先处理的原则）
  >然后依次取出分组并解析出标识符，确定转发端口。然后转发分组

### 虚电路本质含义

- 虚电路是指一对终端间的传输路径，且该传输路径通过转发表建立，并与唯一标识该对终端之间传输的数据标识符绑定在一起。
- 通过建立虚电路实现数据交换的方式为虚电路交换
- 前文提到的标识符就是虚电路标识符
- 虚电路与电路交换建立的两个终端之间的信道相对应，不同的是多对终端之间的虚电路可以共享某段物理链路

### 总结

1. 虚电路的数据传输通路机制是通过虚电路标识符与转发表实现的
2. 控制数据传输过程是通过存储转发实现的

## 数据报交换

### 虚电路交换的优缺点

#### 建立虚电路的两种方式

1. 动态建立虚电路
2. 事先建好虚电路

#### 虚电路的优点

- 解决了电路交换不能共享物理链路的问题

#### 虚电路的缺点

- 动态建立虚电路与释放虚电路是一个复杂的过程，使得数据的传输时延较长
- 事先建好虚电路，因为终端两两之间都要建立记录，因此交换机中的转发项就会很多，数量就多。因此占用交换机的存储空间就大，处理时间也会很长。

### 缺点造成的问题

#### 终端之间通信的特点

- 网络中终端数量较多，每个终端都有可能与其它终端进行通信
- 每个终端与哪个终端通信是不确定的
- 终端之间通信时间是不确定的
- 终端之间传输的数据量是不确定

#### 终端间通信使用虚电路的缺陷

1. 事先建立虚电路。由于终端数量很多，且大量终端之间互不通信。因此会造成处理时间和储间的浪费
2. 动态建立虚电路，可能会出现传输数据的时间远小于建立虚电路和释放虚电路所花费的时间

> 因此虚电路交换不适用于终端之间数据交换

### 数据报交换机制

- 数据传输路径建立机制
  > 在虚电路的基础上，将终端对之间的纪录改为到目的终端所要转发的端口。这样就会节省很多空间与处理时间

- 控制数据传输过程机制
  > 用源地址与目的地址替换原来的虚电路标识符

- 数据报交换特点
  1. 统一终端发送的不同分组可以独立选择传输路径，提高了数据传输过程中的容错性

## 应用场景

### 电路交换应用场景

> 适用于密集的持续的数据交换模式

1. 路由之间互联（SDH）

### 数据报交换应用场景

> 比较适用于终端之间通信

1. 构建以太网
2. 路由器转发IP分组
