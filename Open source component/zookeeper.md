>前言：工作中有比较多的应用服务是依赖与zookeeper
> 但是大多数人都仅限于了解zookeeper是一个分布式协调程序，部署时最好部署奇数个节点的zk集群，其他的就不知道了
> 所以写一篇文档来详细介绍zookeeper是非常有必要的
> 团队里关于zookeeper安装部署的文档比较多，因此本文的侧重点主要在于
> 介绍zookeeper的作用，简单介绍它的工作原理，侧重介绍对API的使用



### zookeeper端口
- 2181
> 对外提供服务的端口，如client的请求

- 2888
> leader用于监听follower的请求的端口

- 3888
> 选举leader时使用

### myid
> myid用于标识当前zk服务/进程。
> 如配置伪zk集群时，一台主机有多个zk实例运行，myid可以起到标识作用
> zoo.cfg中 server.x = ip:port 中x就是myid
> 同一集群中不同主机的zk server的myid不能相同

### ZooKeeper
- 分布式（多个实例共同做一件事）
- 文件系统 + 通知机制
##### 特点
- 一个 leader 多个 follower
- 半数以上的节点存活，集群能正常工作
- 每个节点上的数据都是一致的，只有leader可写
- 同一个客户端的请求按序执行
- 数据更新原子性
- 实时更新，一定时间范围内客户端可以读到最新数据
##### 数据结构 与Linux文件系统类似
- 每个节点称为一个znode
##### 应用场景
- 统一命名服务
- 统一配置管理
##### 工作机制
> ZooKeeper是一个基于观察者模式设计的分布式服务管理框架，负责存储管理？数据，接受观察者注册
> 一旦数据状态发生变化，zk将通知在zk上租车的观察者作出反应

