# sed 命令

Sed(流编辑器):

stream editor for filtering and transforming text

## 使用场景

> 对特定行(默认所有行) 进行增(i,a)删(d)改(s)查(p)处理

使用方式:

> sed [命令选项] '[行匹配][动作]' [文件名]

## 常用命令选项

1. -n(shuoutdown): 不输出模式空间内容到屏幕，即不自动打印
2. -e: 执行多个指定的操作内容，与 grep 的 -e 类似
3. -f(script file): 指定脚本文件
4. -r(regexp-extended): 扩展正则表达式支持
5. -i[.备份后缀](immediately): 将改动保存到原文件中，可以选择是否对原文件做备份

## script

> script 由两部分组成，地址(标识需要操作的行)、动作(对匹配行的行为)

### 地址

单地址:

`num`: 标识对应的行。如 3 标识第三行

`$`: 标识最后一行

`/regex/`: 正则表达式所匹配的行

范围地址:

`num1, num2`: num1 到 num2 所包含的行
`num1, +num2`: num1 到 num1+num2 所包含的行
`/regx1/,/regx2/`: 正则表达式 1 匹配的第一行到正则表达式 2 匹配的第一行及中间的所有行

> 范围地址可以混用，即 `/regex/, num` 和 `/regex/, +num` 等形式

步进地址:

`num1~2`

### 动作

- `d`: 删除对应行
- `p`: 打印对应行
- `a[\]${text}`: 在对应行后追加文本内容，默认 `a` 后面的空格不添加，使用 `\`会原样添加
- `i[\]${text}`: 在对应行前面插入文本内容
- `c[\]${text}`: 将对应行替换为文本内容
- `w${path}`: 将对应行内容写入文件中
- `r${path}`: 在对应行后追加文件内容
- `=`: 打印对应行号
- `!`: `!`后加具体动作，对不匹配的行执行动作
- `s/src/dest/[wgp]`/`s@src@dest@[wgp]`/`s#src#dest#[wgp]`: 将 src 字符串替换成 dest(支持正则表达式). g 标识替换对应行中所有匹配的结果，p 显示替换成功的行， w ${path} 将替换成功的行保存至文件